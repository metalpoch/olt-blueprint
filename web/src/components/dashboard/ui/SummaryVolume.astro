---
import BoxIcon from "../../../assets/icons/box.svg";
import Image from "astro/components/Image.astro";
const { data, err } = Astro.props;

const init = data && data[0];
const totalInit = init.mbytes_in_sec + init.mbytes_out_sec;

const end = data && data[data.length - 1];
const totalEnd = end.mbytes_in_sec + end.mbytes_out_sec;

const volume = ((totalEnd - totalInit) * 100) / totalInit;
const strVolume = `${volume >= 0 ? "+" : ""}${volume.toFixed(2)}%`;
---

<article
  class="flex flex-1/3 md:flex-1/5 flex-col gap-2 px-6 py-3 w-1/3 rounded-lg bg-[#121b31] border-2 border-[hsl(217,33%,20%)]"
>
  <div class="w-full flex justify-between">
    <h2 class="text-slate-400">Volumen Total</h2>
    <Image src={BoxIcon} width={20} height={20} alt="icono de pulso" />
  </div>
  <h3 class="font-bold text-2xl">
    {(totalEnd / 1000).toFixed(1)} GByte/sec
  </h3>
  <p class="text-slate-400 text-sm">
    {strVolume} de crecimiento
  </p>
  {
    volume > 0 ? (
      <p class="text-green-300 text-sm">↑ {strVolume}</p>
    ) : (
      <p class="text-red-300 text-sm">↓ {strVolume}</p>
    )
  }
</article>
